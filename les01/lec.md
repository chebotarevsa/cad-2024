# Введение в кросплатформенную разработку

## Нативная и кроссплатформенная разработка

Нативная разработка — это классический способ создания приложения для iOS и Android. Ведется она с использованием инструментов и языков программирования, предложенных вендорами — Apple и Google. Языки в данном случае — Swift (iOS) и Kotlin (Android), а инструментов для профилирования и отладки в нативной разработке очень много.



Плюсы

Так как вы «говорите» с платформой на её родном языке программирования, мобильные ОС понимают вас быстрее и лучше. Рассмотрим главные плюсы нативной разработки мобильных приложений. 

Производительность. Нативные приложения отзывчивее и стабильнее. Их время загрузки меньше и они реже зависают.

Интеграция AR/VR. Если вы делаете игру с дополненной реальностью или VR-приложение, нативная разработка лучше справится с этой задачей.

Эффективность. Нативные приложения расходуют меньше заряда батареи — им не нужна полная мощность для обработки кода на разных языках.

Возможности для инноваций. Нативная разработка лучше подходит для приложений с уникальной логикой, которую никто раньше не видел. Инновационные проекты можно делать и на React Native, но это сложнее и дольше. Кроссплатформенные фреймворки — это набор готовых решений. Поэтому все уникальные элементы придётся писать на нативных языках.


Минусы

Время разработки. Время зависит от сложности проекта, но в среднем нативная мобильная разработка приложения для одной платформы занимает до 9 месяцев.

Стоимость. Чтобы не сокращать аудиторию приложения, придётся нанять две команды для работы над версиями для разных мобильных ОС. При этом вы потратите много денег на зарплаты — в среднем разработчики на Swift получают $7000 в месяц.

Сложности с поддержкой. Тестирование и обновление кодов для двух версий, которые друг другом не связаны — это долго. И придётся нанимать две команды тестировщиков.

Финансовые риски. Нет гарантии, что люди купят ваше приложение в любом случае. Но на разработке нативного приложения вы потеряете больше денег. Причина даже не в неудачном маркетинге — люди устали от приложений.


Кроссплатформенная разработка подразумевает, что мы используем один и тот же код и на iOS, и на Android. Вообще говоря, это всё такое же нативное приложение, но, запустив его, мы сразу проваливаемся в мир Flutter или RN, и всё происходит уже там. Стоит отметить, что разработка на Flutter/RN идет быстрее. Причем не только за счет того, что мы делаем 1 приложение вместо 2-х, а еще и за счет концепций создания приложений, в частности UI.


Плюсы

Главный плюс кроссплатформенной разработки — один код для всех платформ. Из этого преимущества вытекают остальные.

Скорость разработки. Кроссплатформенные фреймворки позволяют работать одновременно над версиями приложения для разных платформ. Поэтому вы можете выйти на рынок уже через 3-4 месяца.

Стоимость разработки. Вы экономите на кадрах, потому что не нужно нанимать две команды для работы над двумя версиями.

Широкая аудитория. Для сокращения расходов на разработку нативного приложения придётся выбрать одну платформу — более популярную аудитории. С кроссплатформенной разработкой можно не выбирать — её изначальная стоимость ниже. Ваш продукт дойдёт до большего числа пользователей, но денег вы потратите меньше.

Минусы

Всё равно нужен нативный код. Без программирования на нативных языках не обойтись — их придётся использовать для сложных функций. 

Сложнее тестирование. Приложение должно работать без багов на всех платформах. Поэтому вы больше времени потратите на тестирование.

Сложнее обновлять. В новых версиях мобильных ОС появляются новые фичи. Но вы не встроите их в приложение, пока они не появятся в вашем фреймворке. Больше всего проблем с Android — эта система обновляется чаще.


# Flutter 


Flutter – это платформа с открытым исходным кодом, который разработан и поддерживается Google. Фронтенд-разработчики и фуллстек-разработчики используют Flutter для создания пользовательского интерфейса приложений (UI) для различных платформ с применением единой базы кода.

После выпуска Flutter в 2018 году эта платформа в основном поддерживала разработку мобильных приложений. Теперь Flutter поддерживает разработку приложений на шести платформах: iOS, Android, веб-интерфейс, Windows, MacOS и Linux.
Как Flutter упрощает разработку приложений?

Flutter упрощает процесс создания единообразных привлекательных пользовательских интерфейсов для приложения на шести поддерживаемых платформах.

Поскольку Flutter – это платформа разработки, поддерживающая несколько платформ, мы сначала сравним разработку на ней с разработкой для конкретных платформ. Затем мы рассмотрим функции, уникальные для Flutter.
Сравнение разработки для конкретной платформы с разработкой кроссплатформенных приложений

Разработка приложения для отдельной платформы, например iOS, называется разработкой платформозависимых приложений. Разработка кроссплатформенных приложений, напротив, является созданием приложений для нескольких платформ с единой базой кода.
Разработка платформозависимых приложений

Поскольку при разработке платформозависимых приложений разработчики создают программное обеспечение для конкретной платформы, они имеют полный доступ ко встроенным функциям устройства. Этим обычно обусловлена более высокая производительность и скорость платформозависимых приложений по сравнению с кроссплатформенными.

С другой стороны, если вы хотите, чтобы приложение работало на нескольких платформах, то для разработки платформозависимого приложения потребуется больше кода и разработчиков. Помимо этого, платформозависимые приложения сложнее запускать на различных платформах с единообразным пользовательским интерфейсом. В этом случае пригодится платформа для разработки кроссплатформенных приложений, такая как Flutter.
Разработка кроссплатформенных приложений

Разработка кроссплатформенных приложений дает разработчикам возможность использовать один язык программирования и одну базу кода, чтобы создать приложение для нескольких платформ. Если вы выпускаете приложение для нескольких платформ, кроссплатформенная разработка потребует меньших затрат и меньшего времени, чем разработка платформозависимого приложения.

Также этот процесс позволяет разработчиков создавать более единообразные интерфейсы для различных платформ.

Этот подход может иметь недостатки по сравнению с разработкой платформозависимых приложений, в том числе ограниченный доступ к функциям устройства. Однако во Flutter реализованы возможности, которые делают разработку кроссплатформенных приложений более простой и высокоэффективной.
Преимущества Flutter

Flutter выделяется среди платформ для кроссплатформенной разработки благодаря следующим преимуществам.

    Производительность близка к производительности платформозависимых приложений. Flutter использует язык программирования Dart и компилируется в машинный код. Устройства понимают этот код, что обеспечивает быструю работу и высокую производительность.
    Быстрое, единообразное и настраиваемое отображение. Flutter не полагается на платформозависимые инструменты отображения, а использует для отображения пользовательского интерфейса графическую библиотеку Google Skia с открытым исходным кодом. Это предоставляет пользователям единообразные визуальные элементы, независимо от платформы, используемой для доступа к приложению. 
    Удобные инструменты для разработчиков Компания Google создала Flutter с акцентом на простоте использования. Благодаря таким функциям, как горячая перезагрузка, разработчики могут предварительно просматривать, как будут выглядеть изменения в коде, без потери состояния. Другие инструменты, такие как инспектор виджетов, упрощают визуализацию и решение проблем в макетах пользовательского интерфейса.

Какой язык программирования используется во Flutter?

Flutter использует язык программирования с открытым исходным кодом Dart, который также разработан в Google. Dart оптимизирован для создания пользовательского интерфейса, и многие его преимущества используются во Flutter.

Например, одна из возможностей Dart, которая используется во Flutter, – защита от нулевых ссылок. Защита от нулевых указателей упрощает обнаружение распространенных ошибок, называемых ошибками нулевых ссылок. Эта возможность сокращает время, затрачиваемое разработчиками на обслуживание кода, освобождая время на создание приложений.

# Kotlin Multiplatform
Kotlin Multiplatform — это набор для разработки программного обеспечения, который значительно лучше других вариантов разработки кроссплатформенных приложений. В этом руководстве по Kotlin multiplatform вы подробно узнаете все об этом наборе.

Что такое Kotlin Multiplatform?

Kotlin multiplatform — это фича, появившаяся в 2017 году вместе с Kotlin 1.2. Данная возможность позволяет писать один и тот же код непосредственно на нескольких платформах, ориентируясь на кроссплатформенную разработку приложений. В ее основе лежит идея подхода "Write Once Run Anywhere" [пиши один раз, запускай везде], но она выводит данную концепцию на гораздо более высокий уровень, позволяя писать код один раз и потом использовать его на нескольких платформах. 

Мультиплатформенное программирование на Kotlin позволяет разработчикам решить проблему зависимостей от конкретной платформы. Это сокращает время, затрачиваемое на написание и поддержку одного и того же кода для разных платформ. Kotlin Multiplatform дает возможность включать другие платформы, такие как Linux, Windows и веб (JavaScript), в то время как его подмножество Kotlin multiplatform mobile позволяет разработчикам писать код бизнес-логики для iOS и Android из одной кодовой базы.
Как работает Kotlin Multiplatform?

Kotlin для iOS, Android и других популярных операционных систем позволяет хранить многократно используемые фрагменты кода для двух и более версий приложений.    

Возьмем, к примеру, Android и iOS. Общий код бизнес-логики для Android преобразуется в байткод Java, который может быть выполнен в JVM. В Android есть виртуальная машина, поэтому он может легко его выполнить. В случае iOS виртуальной машины нет, поэтому код преобразуется в нативный, который может быть выполнен на iOS.

Теперь в компиляторе Kotlin есть фронтенд, который преобразует код в промежуточное представление (intermediate representation - IR), а бэкенд конвертирует это промежуточное представление в машинный код.

Так, в случае android он преобразует его в байткод java, а в случае iOS - в нативный машинный код iOS.
Общий код Kotlin

Чтобы обеспечить запуск общего кода, в Kotlin предусмотрены компиляторы под конкретные платформы. Для преобразования кода в соответствии с различными платформами предоставляются различные компиляторы. К ним относятся Kotlin/ JVM, Kotlin/ JavaScript и Kotlin/ Native. Эти версии содержат специфичные для конкретной платформы инструменты, библиотеки и расширения языка Kotlin.

Каждая платформо-зависимая версия включает различные платформы; например, JVM содержит Java 8, Java 6 и Android, JavaScript - Browser и Node, а Native - iOS, Mac, Windows, Linux и т.д.

Мультиплатформенные библиотеки помогают при разработке общих частей проекта в одной области, предоставляя API для общего кода Kotlin и впоследствии распространяя его на все целевые платформы.

Версии платформо-ориентированных библиотек предоставляют библиотеки, которые могут быть использованы для расширения специфических возможностей целевых платформ.
Чем мультиплатформенность отличается от кроссплатформенности?

Мультиплатформенная система — в которой программа для разных платформ использует как коды, характерные для каждой из них, так и общий код, используемый обеими платформами.

Кроссплатформенное приложение — это система, позволяющая выполнять деплой приложения с использованием абсолютно одинакового кода приложения.

Основной упор в Kotlin multiplatform делается на совместное использование общего кода, и мультиплатформенность рассматривается как развитие нативной разработки.
Преимущества Kotlin Multiplatform

    Поддержка и сообщество: Многие компании и организации выбирают язык Kotlin. Кроме того, после того, как компания Google объявила Kotlin предпочтительным для android, его выбирают многие компании. На этом языке начали работать множество пользователей, что означает огромную поддержку Kotlin со стороны сообщества.

    Быстрый и чистый код: В Kotlin multiplatform нет необходимости заново создавать и переписывать код для разных платформ. Можно просто использовать общий код для разных платформ, что экономит огромное количество времени. Такие функциональные возможности, как интероперабельность, также делают работу очень простой и быстрой, и не возникает отставания от нативных платформ; благодаря этому разработчикам не нужно ждать, пока появятся новые фичи для поддержки.

    Быстрая разработка: Совместное использование кода экономит массу времени и помогает сделать процесс разработки намного быстрее и проще. Его особенности, включая "нулевую безопасность", поддержку IDE и взаимодействие с Java, делают его менее сложным и быстрым.

    Один язык для кроссплатформенных и нативных приложений: Большинство средств разработки кроссплатформенных приложений не позволяют использовать возможности, присущие устройствам на базе iOS и Android. В Kotlin нет необходимости внедрять в кодовую базу новый язык программирования. Можно легко заставить ваше android-приложение работать на iOS-устройствах без значительных изменений в коде.

# React Native
React Native (также известный как RN) - это популярная платформа мобильных приложений на основе JavaScript, которая позволяет создавать мобильные приложения с собственным интерфейсом для iOS и Android. Фреймворк позволяет создавать приложения для различных платформ, используя одну и ту же кодовую базу.

React Native был впервые выпущен Facebook в качестве проекта с открытым исходным кодом в 2015 году. Всего за пару лет он стал одним из лучших решений, используемых для мобильной разработки. Разработка React Native используется для поддержки некоторых ведущих мобильных приложений в мире, включая Instagram, Facebook и Skype. Мы обсудим эти и другие примеры приложений с поддержкой React Native далее в этом посте.

Существует несколько причин глобального успеха React Native.

Во-первых, с помощью React Native компании могут создать код только один раз и использовать его для работы своих приложений для iOS и Android. Это означает огромную экономию времени и ресурсов.

Во–вторых, React Native был построен на основе React - библиотеки JavaScript, которая уже была чрезвычайно популярна, когда была выпущена мобильная платформа. Мы подробно обсудим различия между React и React Native далее в этом разделе.

В-третьих, фреймворк позволил разработчикам интерфейсов, которые раньше могли работать только с веб-технологиями, создавать надежные, готовые к работе приложения для мобильных платформ.